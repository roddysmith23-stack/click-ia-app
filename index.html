<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAG.IA - Transformation Gallery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&family=Outfit:wght@300;400;600;800;900&display=swap" rel="stylesheet">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    
    <style>
        /* --- SISTEMA ATMOSF√âRICO DIN√ÅMICO (CEO SKY) --- */
        :root {
            --bg-gradient: linear-gradient(180deg, #0072ff 0%, #00c6ff 100%);
            --orb-color: rgba(255, 223, 0, 0.9); 
            --orb-shadow: 0 0 50px rgba(255, 200, 0, 0.8);
            --cloud-color: #FFFFFF;
            --cloud-shadow: rgba(255, 255, 255, 0.4);
            --star-opacity: 0;
            
            /* CRISTAL IOS REAL */
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.3);
            --glass-blur: 50px;
            --glass-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            
            --text-main: #FFFFFF;
            --text-contrast-bg: rgba(0, 0, 0, 0.25); 
            --accent: #38bdf8;
        }

        [data-theme='night'] {
            --bg-gradient: linear-gradient(180deg, #0f172a 0%, #312e81 100%);
            --orb-color: rgba(200, 200, 200, 0.3);
            --orb-shadow: 0 0 40px rgba(255, 255, 255, 0.2);
            --cloud-color: #64748b;
            --cloud-shadow: rgba(0, 0, 0, 0.5);
            --star-opacity: 1;
            --glass-bg: rgba(15, 23, 42, 0.6);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #F8FAFC;
            --text-contrast-bg: rgba(0, 0, 0, 0.4);
        }

        body { 
            margin: 0; overflow-x: hidden; font-family: 'Inter', sans-serif; 
            background: var(--bg-gradient); color: var(--text-main); 
            transition: background 1.5s ease; 
            min-height: 100vh; cursor: none; 
        }
        
        /* CURSOR */
        .cursor-orb {
            position: fixed; top: 0; left: 0; width: 40px; height: 40px;
            background: var(--orb-color); border-radius: 50%;
            transform: translate(-50%, -50%); pointer-events: none; z-index: 9999;
            box-shadow: var(--orb-shadow); filter: blur(8px);
            transition: background 0.5s ease; mix-blend-mode: screen;
        }
        .cursor-dot {
            position: fixed; top: 0; left: 0; width: 6px; height: 6px;
            background: white; border-radius: 50%;
            transform: translate(-50%, -50%); pointer-events: none; z-index: 10000;
        }

        /* UTILS */
        h1, h2, h3, .font-display { font-family: 'Outfit', sans-serif; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .font-body { font-family: 'Inter', sans-serif; }
        .readable-text { background: var(--text-contrast-bg); backdrop-filter: blur(4px); padding: 2px 8px; border-radius: 6px; display: inline-block; }
        .text-shadow { text-shadow: 0 2px 4px rgba(0,0,0,0.5); }

        /* CLOUDS */
        .sky-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; pointer-events: none; }
        .cloud { position: absolute; background: var(--cloud-color); border-radius: 100px; filter: blur(25px); opacity: 0.8; transition: background 1.5s ease; box-shadow: inset -10px -10px 30px var(--cloud-shadow); }
        .cloud::after, .cloud::before { content: ''; position: absolute; background: inherit; border-radius: 50%; }
        .cloud::after { width: 100px; height: 100px; top: -50px; left: 50px; }
        .cloud::before { width: 120px; height: 120px; top: -70px; right: 50px; }
        @keyframes floatCloud { 0% { transform: translateX(-120%); } 100% { transform: translateX(120vw); } }
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: radial-gradient(white 2px, transparent 2px); background-size: 50px 50px; opacity: var(--star-opacity); transition: opacity 1.5s ease; z-index: -2; }

        /* CRYSTAL UI */
        .crystal-card {
            background: var(--glass-bg); 
            backdrop-filter: blur(var(--glass-blur)); -webkit-backdrop-filter: blur(var(--glass-blur));
            border: 1px solid var(--glass-border); 
            box-shadow: var(--glass-shadow);
            border-radius: 32px; 
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .glass-input { 
            background: rgba(0, 0, 0, 0.15); border: 1px solid rgba(255,255,255,0.25); 
            color: #fff; font-family: 'Outfit', sans-serif; padding: 16px; width: 100%; border-radius: 16px; 
            transition: all 0.3s; backdrop-filter: blur(10px); font-weight: 500; text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        .glass-input:focus { outline: none; background: rgba(0, 0, 0, 0.3); border-color: rgba(255,255,255,0.6); }
        .glass-input::placeholder { color: rgba(255,255,255,0.7); }
        .glass-input.area { height: 100px; resize: none; }
        
        .tech-btn { 
            background: rgba(255, 255, 255, 0.95); color: #0f172a; font-family: 'Outfit', sans-serif; font-weight: 800; 
            border-radius: 99px; padding: 18px 40px; transition: all 0.3s; border: none; cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
        }
        .tech-btn:hover { transform: scale(1.05); box-shadow: 0 15px 40px rgba(0,0,0,0.3); background: #ffffff; }

        /* Golden Button */
        .gold-btn {
            background: linear-gradient(135deg, #FFD700 0%, #FDB931 100%);
            color: #5e4606; font-weight: 900; text-transform: uppercase; letter-spacing: 0.05em;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); border: 1px solid #FFF;
            animation: pulseGold 3s infinite;
        }
        .gold-btn:hover { transform: scale(1.05); filter: brightness(1.1); }
        @keyframes pulseGold { 0% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); } 50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.9); } 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); } }

        .header-stack { position: absolute; left: 50%; transform: translateX(-50%); top: 20px; display: flex; flex-direction: column; align-items: center; cursor: pointer; z-index: 30; width: max-content; }
        
        .fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .back-arrow-btn {
            position: absolute; top: 24px; left: 24px; 
            width: 44px; height: 44px; border-radius: 50%;
            background: rgba(255,255,255,0.15); backdrop-filter: blur(15px);
            display: flex; items-center; justify-center;
            cursor: pointer; transition: all 0.2s;
            border: 1px solid rgba(255,255,255,0.3);
            z-index: 60;
        }
        .back-arrow-btn:hover { background: rgba(255,255,255,0.3); transform: scale(1.1); }

        .god-badge { background: linear-gradient(45deg, #FFD700, #FFA500); color: white; font-weight: 900; font-size: 10px; padding: 2px 8px; border-radius: 99px; box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); animation: pulseGod 2s infinite; }
        
        .slider-container { position: relative; width: 100%; height: 500px; border-radius: 32px; overflow: hidden; cursor: ew-resize; box-shadow: 0 25px 60px rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.4); transition: transform 0.3s; }
        .slider-container:hover { transform: scale(1.01); }

        /* Sparkle Button */
        .sparkle-btn { position: absolute; right: 10px; top: 10px; background: linear-gradient(135deg, #FFD700, #FFA500); color: #fff; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 0 10px rgba(255,215,0,0.5); animation: pulse 2s infinite; z-index: 10; border: none; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ASSETS & DATA ---
        // Referencia a tus archivos locales
        const CEO_PHOTO = "roddy-ceo.jpg";
        const CEO_EMAIL = "roddysmith23@hotmail.com";
        const CEO_PASS = "Yosoyarca1721383220*";
        
        // ‚ö†Ô∏è SEGURIDAD: PEGA TU CLAVE AQU√ç ABAJO ENTRE LAS COMILLAS
        const apiKey = AIzaSyD2el0mvhLtV0FHR1LUUO-hEEALROLOZwc; 

        // --- GALER√çA ---
        // Se usan tus archivos locales para la demo de Jordan
        const TRANSFORMATIONS = [
            { id: 'jordan', title: "Air Jordan 1 High", desc: "De foto casera a estudio profesional 8K con iluminaci√≥n dram√°tica.", before: 'IMG_8399.jpg', after: 'IMG_8401.jpg', tag: "CALZADO" },
            { id: 'burger', title: "Hamburguesa Gourmet", desc: "Transformaci√≥n a fotograf√≠a culinaria editorial.", before: 'https://image.pollinations.ai/prompt/simple%20burger%20on%20plate?width=800&height=800&nologo=true', after: 'https://image.pollinations.ai/prompt/gourmet%20burger%20cinematic%20lighting%20dark%20wood%20background%208k?width=800&height=800&nologo=true', tag: "GASTRONOM√çA" },
            { id: 'watch', title: "Reloj Minimalista", desc: "Integraci√≥n de producto en entorno de lujo.", before: 'https://image.pollinations.ai/prompt/silver%20watch%20grey%20background?width=800&height=800&nologo=true', after: 'https://image.pollinations.ai/prompt/luxury%20silver%20watch%20on%20black%20marble%20golden%20lighting?width=800&height=800&nologo=true', tag: "LUJO" }
        ];

        // =====================================================================
        // üß† L√ìGICA DEL CEREBRO: LOS 2 PROMPTS MAESTROS (FLUJOGRAMA)
        // =====================================================================

        // PROMPT MAESTRO 1: EL ESTRATEGA (ANALYSIS PHASE)
        // Define la Estrategia, Colorimetr√≠a y las 4 Ps del Marketing.
        const PROMPT_MAESTRO_1 = `
        ACT√öA COMO: Director de Marketing Global y Psic√≥logo del Consumidor de MaG.IA.
        TAREA: Analizar los datos del usuario y definir una ESTRATEGIA VISUAL ganadora.
        INPUT USUARIO: 
        - Producto: {PROD}
        - P√∫blico Objetivo: {TARGET}
        - Deseo Visual: {WISH}

        TU OBJETIVO: Crear un "Brief de Marketing" en formato JSON.
        REGLAS:
        1. Define la "Colorimetr√≠a" exacta que evoque la emoci√≥n correcta para ese p√∫blico.
        2. Define el "√Ångulo de C√°mara" que haga el producto heroico.
        3. Define la "Iluminaci√≥n" (ej: Rembrandt, Softbox, Ne√≥n).
        
        FORMATO RESPUESTA JSON (SOLO JSON):
        {
            "strategy_summary": "Resumen de 1 frase de la estrategia (ej: Minimalismo de lujo para Gen Z)",
            "color_palette": "Lista de 3 colores hex o nombres",
            "emotional_goal": "La emoci√≥n principal (ej: Status, Urgencia, Calma)",
            "lighting_setup": "Descripci√≥n t√©cnica de luz",
            "camera_angle": "√Ångulo t√©cnico (ej: Low angle, Macro)",
            "viral_copy": "Un copy corto y explosivo para Instagram/TikTok con emojis"
        }
        `;

        // PROMPT MAESTRO 2: EL ARTISTA (EXECUTION PHASE - MAGIC STUDIO)
        // Toma la estrategia del Maestro 1 y genera la imagen final.
        const PROMPT_MAESTRO_2 = `
        ACT√öA COMO: Artista 3D Senior y Fot√≥grafo de Producto 8K.
        TAREA: Generar el PROMPT T√âCNICO FINAL para el motor de renderizado (Pollinations/Stable Diffusion).
        
        INPUT ESTRAT√âGICO (Del Maestro 1):
        - Iluminaci√≥n: {LIGHT}
        - √Ångulo: {ANGLE}
        - Paleta: {COLORS}
        - Producto: {PROD}
        - Escenario Deseado: {WISH}

        REGLAS DE GENERACI√ìN VISUAL:
        1. Combina el producto con el escenario usando la iluminaci√≥n definida.
        2. A√±ade palabras clave de calidad: "8k, unreal engine 5, octane render, photorealistic, cinematic depth of field".
        3. EXCLUYE TEXTO: "--no text, no watermark, no letters".
        4. Crea un fondo separado descriptivo para composici√≥n.

        FORMATO RESPUESTA JSON (SOLO JSON):
        {
            "final_image_prompt": "Prompt t√©cnico completo en INGL√âS para la IA...",
            "background_prompt": "Prompt SOLO del fondo (sin producto) desenfocado en INGL√âS..."
        }
        `;

        // =====================================================================

        const callGemini = async (prompt, isJson = false) => {
            try {
                if (!apiKey || apiKey === "PEGAR_TU_CLAVE_AQUI") {
                    console.warn("‚ö†Ô∏è FALTA API KEY: Pega tu clave en la l√≠nea 193");
                    return null; 
                }
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: { responseMimeType: isJson ? "application/json" : "text/plain" }
                    })
                });
                const data = await response.json();
                if(!data.candidates) return null;
                const text = data.candidates[0].content.parts[0].text;
                return isJson ? JSON.parse(text) : text;
            } catch (e) {
                console.error("Gemini Error", e);
                return null;
            }
        };

        // --- VISUAL COMPONENTS ---
        const CelestialCursor = () => {
            const [pos, setPos] = useState({ x: -100, y: -100 });
            useEffect(() => {
                const move = (e) => {
                    const clientX = e.clientX || (e.touches && e.touches[0].clientX);
                    const clientY = e.clientY || (e.touches && e.touches[0].clientY);
                    if (clientX) setPos({ x: clientX, y: clientY });
                };
                window.addEventListener('mousemove', move); window.addEventListener('touchmove', move);
                return () => { window.removeEventListener('mousemove', move); window.removeEventListener('touchmove', move); }
            }, []);
            return (<><div className="cursor-orb" style={{ left: pos.x, top: pos.y }}></div><div className="cursor-dot" style={{ left: pos.x, top: pos.y }}></div></>);
        };

        const PixarSky = () => {
            const clouds = useRef([...Array(5)].map((_, i) => ({ id: i, top: Math.random()*50+'%', width: 300+Math.random()*300+'px', delay: -Math.random()*40+'s', opacity: 0.8+Math.random()*0.2 })));
            return (<div className="sky-container"><div className="stars"></div>{clouds.current.map(c => (<div key={c.id} className="cloud" style={{ top: c.top, width: c.width, height: c.width, left: '-20%', animation: `floatCloud 60s linear infinite`, animationDelay: c.delay, opacity: c.opacity }}></div>))}</div>);
        };

        const NeuralBrain = () => {
            const canvasRef = useRef(null);
            useEffect(() => {
                const canvas = canvasRef.current; if (!canvas) return;
                const ctx = canvas.getContext('2d');
                let width = canvas.width = 300; let height = canvas.height = 300;
                let particles = [];
                for(let i=0; i<60; i++) particles.push({x: Math.random()*width, y: Math.random()*height, vx: (Math.random()-0.5)*2, vy: (Math.random()-0.5)*2});
                const animate = () => {
                    ctx.clearRect(0,0,width,height);
                    particles.forEach((p, i) => {
                        p.x += p.vx; p.y += p.vy;
                        if(p.x < 0 || p.x > width) p.vx *= -1; if(p.y < 0 || p.y > height) p.vy *= -1;
                        ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI*2); ctx.fillStyle = 'rgba(255,255,255,0.8)'; ctx.fill();
                        particles.slice(i+1).forEach(p2 => { if(Math.hypot(p.x-p2.x, p.y-p2.y) < 100) { ctx.beginPath(); ctx.strokeStyle = `rgba(255,255,255,0.2)`; ctx.moveTo(p.x, p.y); ctx.lineTo(p2.x, p2.y); ctx.stroke(); } });
                    });
                    requestAnimationFrame(animate);
                };
                animate();
            }, []);
            return <canvas ref={canvasRef} className="w-48 h-48 mx-auto mb-6 bg-white/5 rounded-full backdrop-blur-md border border-white/20 shadow-2xl" />;
        };

        // --- UI COMPONENTS ---
        const ComparisonSlider = ({ beforeImg, afterImg }) => {
            const [sliderPos, setSliderPos] = useState(50);
            const containerRef = useRef(null);
            const handleMove = (e) => {
                if (!containerRef.current) return;
                const rect = containerRef.current.getBoundingClientRect();
                const clientX = e.clientX || (e.touches && e.touches[0].clientX); if (clientX === undefined) return;
                setSliderPos(Math.min(100, Math.max(0, (clientX - rect.left) / rect.width * 100)));
            };
            return (
                <div className="slider-container" ref={containerRef} onMouseMove={handleMove} onTouchMove={handleMove}>
                    <img src={afterImg} className="absolute inset-0 w-full h-full object-cover" />
                    <div className="absolute inset-0 w-full h-full overflow-hidden border-r-4 border-white" style={{ width: `${sliderPos}%` }}>
                        <img src={beforeImg} className="absolute inset-0 w-full h-full object-cover max-w-none" style={{ width: containerRef.current?.offsetWidth }} />
                    </div>
                    <div className="absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-14 h-14 bg-white rounded-full shadow-2xl flex items-center justify-center z-10" style={{ left: `${sliderPos}%` }}>‚Üî</div>
                </div>
            );
        };

        // --- VIEWS ---
        const QuestionView = ({ onNext, setUserData }) => {
            const [prod, setProd] = useState("");
            const [target, setTarget] = useState("");
            const [wish, setWish] = useState("");
            
            return (
                <div className="fixed inset-0 z-40 flex items-center justify-center p-4 fade-in">
                    <div className="crystal-card p-10 max-w-2xl w-full text-center relative">
                        <div className="back-arrow-btn" onClick={() => window.location.reload()}>‚Üê</div>
                        <h2 className="text-3xl font-display font-bold mb-8 text-shadow">Dise√±a tu Campa√±a</h2>
                        <div className="space-y-5 text-left">
                            <div><label className="font-label ml-2 mb-1 block">¬øQu√© vendes? (Producto)</label><input className="glass-input" placeholder="Ej: Zapatillas deportivas" value={prod} onChange={e => setProd(e.target.value)} /></div>
                            <div><label className="font-label ml-2 mb-1 block">¬øA qui√©n? (P√∫blico)</label><input className="glass-input" placeholder="Ej: J√≥venes urbanos" value={target} onChange={e => setTarget(e.target.value)} /></div>
                            <div><label className="font-label ml-2 mb-1 block">Tu Visi√≥n (Opcional)</label><textarea className="glass-input area" placeholder="Ej: Que parezca volar en el espacio" value={wish} onChange={e => setWish(e.target.value)} /></div>
                        </div>
                        <button onClick={() => { setUserData({prod, target, wish}); onNext(); }} className="tech-btn w-full mt-8 text-lg">ACTIVAR CEREBRO MAESTRO</button>
                    </div>
                </div>
            );
        };

        const ProcessingView = ({ onFinish, userData }) => {
            const [status, setStatus] = useState("Iniciando Sistema Neural...");
            
            useEffect(() => {
                const executeMasterPlan = async () => {
                    // PASO 1: PROMPT MAESTRO 1 (Estrategia)
                    setStatus("üß† Maestro 1: Analizando las 4 P del Marketing...");
                    const strategyPrompt = PROMPT_MAESTRO_1
                        .replace('{PROD}', userData.prod)
                        .replace('{TARGET}', userData.target)
                        .replace('{WISH}', userData.wish);
                    
                    const strategyData = await callGemini(strategyPrompt, true);
                    if (!strategyData) { setStatus("Error: Verifica tu API KEY en el c√≥digo"); return; }

                    // PASO 2: Visualizaci√≥n de Estrategia
                    setStatus(`üéØ Estrategia Detectada: ${strategyData.emotional_goal}`);
                    await new Promise(r => setTimeout(r, 2000));
                    
                    setStatus("üé® Aplicando Colorimetr√≠a y Estilo...");
                    await new Promise(r => setTimeout(r, 1500));

                    // PASO 3: PROMPT MAESTRO 2 (Arte)
                    setStatus("üì∏ Maestro 2: Renderizando en Magic Studio...");
                    const artPrompt = PROMPT_MAESTRO_2
                        .replace('{LIGHT}', strategyData.lighting_setup)
                        .replace('{ANGLE}', strategyData.camera_angle)
                        .replace('{COLORS}', strategyData.color_palette)
                        .replace('{PROD userData.prod}', userData.prod)
                        .replace('{WISH}', userData.wish);

                    const visualData = await callGemini(artPrompt, true);
                    
                    // PASO 4: Finalizar
                    // Fusionamos los datos estrat√©gicos y visuales
                    const finalData = { ...strategyData, ...visualData };
                    onFinish(finalData);
                };
                executeMasterPlan();
            }, []);

            return (
                <div className="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/60 backdrop-blur-xl fade-in">
                    <NeuralBrain />
                    <h2 className="text-3xl font-display font-bold mt-6 animate-pulse text-center px-4">{status}</h2>
                </div>
            );
        };

        const MagicStudio = ({ onClose, data, userData }) => {
            const [bgUrl, setBgUrl] = useState("https://image.pollinations.ai/prompt/loading");
            
            useEffect(() => {
                const finalPrompt = encodeURIComponent(data.final_image_prompt);
                // Usamos Pollinations como motor de renderizado temporal
                setBgUrl(`https://image.pollinations.ai/prompt/${finalPrompt}?nologo=true&width=1024&height=1024&seed=${Math.random()}`);
            }, []);

            return (
                <div className="fixed inset-0 z-40 flex items-center justify-center p-4 fade-in">
                    <div className="crystal-card w-full h-[90vh] max-w-7xl flex overflow-hidden relative border-2 border-white/20">
                        <div className="back-arrow-btn" onClick={onClose}>‚Üê</div>
                        
                        <div className="flex-1 bg-black/40 flex items-center justify-center p-10 relative">
                            <div className="h-[600px] w-[600px] relative shadow-2xl bg-gray-900 rounded-xl overflow-hidden">
                                <img src={bgUrl} className="absolute inset-0 w-full h-full object-cover" />
                                {/* Overlay de Producto Simulado */}
                                <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                    <h1 className="text-6xl font-black text-white/80 drop-shadow-2xl uppercase mix-blend-overlay">{userData.prod}</h1>
                                </div>
                                <div className="absolute bottom-4 right-4 gold-btn px-6 py-3 rounded-full text-xs">UPSCALE 8K</div>
                            </div>
                        </div>

                        <div className="w-80 bg-white/10 backdrop-blur-xl border-l border-white/20 p-6 flex flex-col gap-6 overflow-y-auto">
                            <div className="text-xl font-display font-bold border-b border-white/20 pb-4">MAGIC STUDIO</div>
                            
                            <div className="bg-black/30 p-4 rounded-xl border border-white/10">
                                <div className="text-xs font-bold text-blue-400 mb-1">ESTRATEGIA DETECTADA</div>
                                <p className="text-sm font-light">{data.strategy_summary}</p>
                            </div>
                             <div className="bg-black/30 p-4 rounded-xl border border-white/10">
                                <div className="text-xs font-bold text-yellow-400 mb-1">COPY VIRAL</div>
                                <p className="text-sm italic">"{data.viral_copy}"</p>
                            </div>
                             <div className="bg-black/30 p-4 rounded-xl border border-white/10">
                                <div className="text-xs font-bold text-purple-400 mb-1">COLORIMETR√çA</div>
                                <p className="text-xs">{data.color_palette}</p>
                            </div>

                            <button className="tech-btn w-full text-xs mt-auto">DESCARGAR HD</button>
                        </div>
                    </div>
                </div>
            );
        };

        const ChatBoy = () => {
            const [open, setOpen] = useState(false);
            const [input, setInput] = useState("");
            const [msgs, setMsgs] = useState([{role:'bot', text:'ü§ñ Hola, soy ChatBoy. Conozco todos los secretos de marketing de MaG.IA. ¬øEn qu√© te ayudo?'}]);
            
            // BASE DE INFORMACI√ìN DEL CHATBOT (Inyectada)
            const FAQ_KNOWLEDGE = `
            ERES: ChatBoy, experto en MaG.IA y Marketing.
            DATOS CLAVE:
            - Prompt Maestro: Sistema que analiza las 4 P antes de crear imagen.
            - Derechos: Im√°genes libres de copyright comercial.
            - Calidad: Generamos hasta 8K.
            - Problemas Texto: Las IAs fallan con texto, sugerimos a√±adirlo luego.
            - Precios: Basic $99, Pro $399.
            `;

            const send = async () => {
                if(!input) return;
                const userText = input;
                setMsgs(prev => [...prev, {role:'user', text: userText}]);
                setInput("");
                
                const prompt = `${FAQ_KNOWLEDGE}. Usuario pregunta: "${userText}". Responde corto y cool.`;
                const reply = await callGemini(prompt);
                setMsgs(prev => [...prev, {role:'bot', text: reply || "Estoy procesando..."}]);
            };

            return (
                <div className="fixed bottom-8 right-8 z-[90] flex flex-col items-end">
                    {open && (
                        <div className="mb-4 w-80 crystal-card p-5 fade-in bg-black/60 backdrop-blur-xl">
                            <div className="flex justify-between items-center mb-4"><span className="font-bold text-sm">CHATBOY AI</span><button onClick={()=>setOpen(false)}>‚úï</button></div>
                            <div className="h-64 overflow-y-auto flex flex-col gap-2 mb-4">
                                {msgs.map((m,i)=><div key={i} className={`p-2 rounded-lg text-xs ${m.role==='bot'?'bg-white/20 self-start':'bg-blue-500 self-end'}`}>{m.text}</div>)}
                            </div>
                            <div className="flex gap-2"><input className="glass-input py-2 text-xs" value={input} onChange={e=>setInput(e.target.value)} /><button onClick={send}>‚û§</button></div>
                        </div>
                    )}
                    <button onClick={()=>setOpen(!open)} className="tech-btn w-14 h-14 rounded-full flex items-center justify-center p-0 shadow-2xl">üí¨</button>
                </div>
            );
        };

        const App = () => {
            const [view, setView] = useState('landing');
            const [userData, setUserData] = useState({});
            const [finalData, setFinalData] = useState(null);

            // --- MAIN RENDER ---
            return (
                <>
                    <PixarSky />
                    <CelestialCursor />
                    
                    {/* HEADER SIMPLE */}
                    <div className="absolute top-0 w-full p-6 flex justify-between items-center z-50">
                        <div className="font-display font-black text-2xl tracking-tighter">MAG.IA</div>
                        <button className="glass-input py-2 px-6 text-xs font-bold w-auto cursor-pointer">LOGIN</button>
                    </div>

                    {view === 'landing' && (
                        <main className="min-h-screen flex flex-col items-center justify-center px-4 text-center fade-in relative z-20 pt-20">
                            <h1 className="text-7xl md:text-9xl font-display font-black mb-4 tracking-tighter leading-none drop-shadow-2xl">
                                El Futuro <br/><span className="text-blue-300">del Marketing</span>
                            </h1>
                            <p className="tracking-[0.3em] font-bold text-xs mb-12 uppercase opacity-80">Neuromarketing Visual ‚Ä¢ Powered by Gemini</p>
                            
                            {/* SLIDER DEMO */}
                            <div className="w-full max-w-4xl h-64 crystal-card mb-12 relative overflow-hidden">
                                <ComparisonSlider beforeImg={TRANSFORMATIONS[0].before} afterImg={TRANSFORMATIONS[0].after} />
                            </div>

                            <button onClick={()=>setView('questions')} className="tech-btn text-xl shadow-blue-500/50 shadow-2xl animate-pulse">PRUEBA GRATIS</button>

                            <div className="mt-20 flex gap-4 items-center opacity-60 hover:opacity-100 transition-opacity">
                                <img src={CEO_PHOTO} className="w-12 h-12 rounded-full border-2 border-white" />
                                <div className="text-left"><div className="text-[10px] font-bold">RODDY SMITH</div><div className="text-[9px]">FOUNDER & CSIO</div></div>
                            </div>
                        </main>
                    )}

                    {view === 'questions' && <QuestionView onNext={()=>setView('processing')} setUserData={setUserData} />}
                    {view === 'processing' && <ProcessingView userData={userData} onFinish={(data)=>{ setFinalData(data); setView('studio'); }} />}
                    {view === 'studio' && <MagicStudio data={finalData} userData={userData} onClose={()=>setView('landing')} />}

                    <ChatBoy />
                </>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

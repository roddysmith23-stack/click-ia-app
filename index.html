<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAG.IA | Marketing Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script> <style>
        /* --- EST√âTICA "CELESTIAL TECH" --- */
        :root {
            --sky-top: #E0F7FA;
            --sky-bottom: #FFFFFF;
            --orb-core: #00C6FF;
            --orb-glow: #0072FF;
            --glass: rgba(255, 255, 255, 0.65);
            --glass-border: rgba(255, 255, 255, 0.8);
            --text-main: #0F172A;
            --accent: #2563EB;
        }

        body { 
            margin: 0; font-family: 'Space Grotesk', sans-serif; 
            background: linear-gradient(180deg, var(--sky-top) 0%, var(--sky-bottom) 100%);
            color: var(--text-main); height: 100vh; overflow: hidden;
        }

        /* ORBE MaG (El Avatar) */
        .mag-orb-container {
            position: relative; width: 120px; height: 120px; display: flex; justify-content: center; align-items: center;
        }
        .mag-core {
            width: 60px; height: 60px; background: var(--orb-core); border-radius: 50%;
            box-shadow: 0 0 30px var(--orb-glow), inset 0 0 20px white;
            animation: breathe 4s ease-in-out infinite; z-index: 10;
        }
        .mag-ring {
            position: absolute; border-radius: 50%; border: 1px solid rgba(0, 198, 255, 0.3);
            animation: spin 10s linear infinite;
        }
        .ring-1 { width: 90px; height: 90px; border-top-color: var(--orb-glow); animation-duration: 8s; }
        .ring-2 { width: 120px; height: 120px; border-bottom-color: var(--orb-glow); animation-direction: reverse; animation-duration: 12s; }

        @keyframes breathe { 0%, 100% { transform: scale(1); opacity: 0.9; } 50% { transform: scale(1.1); opacity: 1; box-shadow: 0 0 50px var(--orb-glow); } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* MODO "PENSANDO" (Giro R√°pido) */
        .thinking .mag-core { animation: pulseFast 0.5s infinite alternate; }
        .thinking .mag-ring { animation-duration: 1s; border-color: #FF0080; }
        @keyframes pulseFast { from { transform: scale(0.9); background: #FF0080; } to { transform: scale(1.1); background: #7928CA; } }

        /* CRISTAL UI */
        .glass-panel {
            background: var(--glass); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
        }

        /* NUBES */
        .cloud-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .cloud {
            position: absolute; background: white; border-radius: 100px; opacity: 0.6; filter: blur(20px);
            animation: float linear infinite;
        }
        @keyframes float { from { transform: translateX(-100%) translateY(0); } to { transform: translateX(100vw) translateY(-20px); } }

        /* CARRUSEL INFINITO */
        .carousel-track { display: flex; gap: 16px; padding: 20px 40px; overflow-x: auto; scroll-behavior: smooth; }
        .carousel-track::-webkit-scrollbar { display: none; }
        .carousel-card { 
            min-width: 280px; height: 400px; border-radius: 24px; overflow: hidden; position: relative; 
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .carousel-card:hover { transform: scale(1.05) translateY(-10px); z-index: 10; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }

        /* CHAT BUBBLES */
        .bubble-user { background: #0F172A; color: white; border-radius: 20px 20px 0 20px; }
        .bubble-mag { background: white; color: #0F172A; border-radius: 20px 20px 20px 0; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }

        .typing-dot { width: 6px; height: 6px; background: #0F172A; border-radius: 50%; animation: type 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes type { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ‚òÅÔ∏è BACKGROUND SYSTEM ---
        const Sky = () => {
            return (
                <div className="cloud-bg">
                    {[...Array(6)].map((_, i) => (
                        <div key={i} className="cloud" style={{
                            width: `${200 + Math.random() * 300}px`, height: `${100 + Math.random() * 100}px`,
                            top: `${Math.random() * 80}%`, left: `-${Math.random() * 20}%`,
                            animationDuration: `${30 + Math.random() * 40}s`, animationDelay: `-${Math.random() * 20}s`
                        }} />
                    ))}
                </div>
            );
        };

        // --- üîÆ MaG AVATAR ---
        const MaGOrb = ({ state }) => (
            <div className={`mag-orb-container ${state === 'thinking' ? 'thinking' : ''} transition-all duration-500`}>
                <div className="mag-ring ring-1"></div>
                <div className="mag-ring ring-2"></div>
                <div className="mag-core"></div>
            </div>
        );

        // --- üí∞ ADS & MONETIZATION (SIMULATION) ---
        const AdBreak = ({ onFinish }) => {
            const [timer, setTimer] = useState(5);
            
            useEffect(() => {
                const interval = setInterval(() => {
                    setTimer(prev => {
                        if (prev <= 1) { clearInterval(interval); onFinish(); return 0; }
                        return prev - 1;
                    });
                }, 1000);
                return () => clearInterval(interval);
            }, []);

            return (
                <div className="fixed inset-0 z-50 bg-black/80 backdrop-blur-md flex flex-col items-center justify-center text-white fade-in">
                    <div className="bg-white/10 p-6 rounded-2xl max-w-sm w-full text-center border border-white/20">
                        <div className="text-xs font-bold bg-yellow-400 text-black px-2 py-1 rounded inline-block mb-4">ANUNCIO DE ESPERA (FREE TIER)</div>
                        <h3 className="text-xl font-bold mb-2">Google Cloud Partner</h3>
                        <p className="text-sm opacity-80 mb-6">Optimiza tu infraestructura con AI hoy mismo.</p>
                        <div className="w-full bg-white/20 h-1 rounded-full overflow-hidden mb-2">
                            <div className="h-full bg-blue-500 transition-all duration-1000 ease-linear" style={{ width: `${((5-timer)/5)*100}%` }}></div>
                        </div>
                        <p className="text-xs">Optimizando generaci√≥n: {timer}s...</p>
                        <button className="mt-4 text-xs underline opacity-50 hover:opacity-100">Pasar a PRO (Saltar espera)</button>
                    </div>
                </div>
            );
        };

        // --- üñºÔ∏è RESULT CAROUSEL ---
        const Carousel = ({ items }) => (
            <div className="w-full py-6">
                <div className="carousel-track">
                    {items.map((img, i) => (
                        <div key={i} className="carousel-card group">
                            <img src={img} className="w-full h-full object-cover" />
                            <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-6">
                                <span className="text-white font-bold">Opci√≥n {i+1}</span>
                                <div className="flex gap-2 mt-2">
                                    <button className="bg-white text-black text-xs px-3 py-1 rounded-full font-bold">Editar</button>
                                    <button className="bg-blue-600 text-white text-xs px-3 py-1 rounded-full font-bold">Video VEO</button>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        // --- üì± MAIN APP ---
        const App = () => {
            const [magState, setMagState] = useState('idle'); // idle, thinking, speaking
            const [messages, setMessages] = useState([
                { role: 'mag', type: 'text', content: "Hola Roddy. Todo listo. ¬øQu√© vamos a crear hoy? üòé" }
            ]);
            const [input, setInput] = useState("");
            const [showAd, setShowAd] = useState(false);
            const scrollRef = useRef(null);

            // Auto-scroll al chat
            useEffect(() => {
                if (scrollRef.current) scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
            }, [messages]);

            const handleSend = async (textOverride) => {
                const text = textOverride || input;
                if (!text.trim()) return;

                // 1. User Message
                setMessages(prev => [...prev, { role: 'user', type: 'text', content: text }]);
                setInput("");
                setMagState('thinking');

                // 2. Simulate AI Processing (Wait 1.5s)
                setTimeout(() => {
                    // Trigger Ad Logic (1 out of 2 times for demo)
                    if (Math.random() > 0.5) {
                        setShowAd(true);
                    } else {
                        generateResponse(text);
                    }
                }, 1500);
            };

            const generateResponse = (prompt) => {
                setShowAd(false);
                setMagState('speaking');
                
                // Simulate VEO/Image Generation
                const fakeImages = [
                    `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt + " cinematic lighting product photography 8k")}?seed=${Math.random()}`,
                    `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt + " futuristic neon background minimalist")}?seed=${Math.random()}`,
                    `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt + " luxury editorial style commercial")}?seed=${Math.random()}`
                ];

                setMessages(prev => [
                    ...prev,
                    { role: 'mag', type: 'text', content: "¬°Brutal! üî• Aqu√≠ tienes unas opciones preliminares:" },
                    { role: 'mag', type: 'carousel', content: fakeImages }
                ]);
                
                setTimeout(() => setMagState('idle'), 2000);
            };

            const suggestions = [
                { label: "üëü Sneakers Nike", prompt: "Zapatillas Nike Air Jordan futuristas flotando en nubes ne√≥n" },
                { label: "üçî Burger Gourmet", prompt: "Hamburguesa deliciosa 8k fotograf√≠a publicitaria humo" },
                { label: "üß¥ Skin Care", prompt: "Botella de serum cosm√©tico minimalista sobre agua y piedras zen" },
                { label: "üé¨ Video Comercial", prompt: "Video comercial cinem√°tico de coche deportivo en t√∫nel" }
            ];

            return (
                <div className="flex flex-col h-screen relative z-10">
                    <Sky />
                    
                    {/* HEADER */}
                    <header className="px-6 py-4 flex justify-between items-center glass-panel m-4 rounded-2xl z-20">
                        <div className="flex items-center gap-3">
                            <div className="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold text-xs">M</div>
                            <span className="font-bold tracking-tight text-lg">MAG.IA</span>
                        </div>
                        <div className="flex gap-2">
                            <div className="bg-white/50 px-3 py-1 rounded-full text-xs font-bold text-blue-900 border border-blue-200">
                                PRO: ‚ö° ACTIVADO
                            </div>
                            <img src="roddy-ceo.jpg" className="w-8 h-8 rounded-full border border-white" alt="Profile" />
                        </div>
                    </header>

                    {/* MAIN CHAT AREA */}
                    <main className="flex-1 overflow-y-auto px-4 pb-32" ref={scrollRef}>
                        <div className="flex flex-col items-center py-10">
                            <MaGOrb state={magState} />
                            {messages.length === 1 && (
                                <p className="mt-4 text-sm opacity-60 font-medium">Sistema de Marketing Cu√°ntico: Online</p>
                            )}
                        </div>

                        <div className="max-w-2xl mx-auto space-y-6">
                            {messages.map((msg, i) => (
                                <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                    {msg.type === 'text' ? (
                                        <div className={`px-6 py-4 max-w-[80%] text-sm font-medium leading-relaxed ${msg.role === 'user' ? 'bubble-user' : 'bubble-mag'}`}>
                                            {msg.content}
                                        </div>
                                    ) : (
                                        <Carousel items={msg.content} />
                                    )}
                                </div>
                            ))}
                            {magState === 'thinking' && !showAd && (
                                <div className="flex justify-start">
                                    <div className="bubble-mag px-4 py-3 flex gap-1">
                                        <div className="typing-dot"></div>
                                        <div className="typing-dot"></div>
                                        <div className="typing-dot"></div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </main>

                    {/* INPUT AREA (COCKPIT) */}
                    <div className="fixed bottom-0 left-0 w-full p-4 z-30">
                        <div className="max-w-2xl mx-auto">
                            {/* Visual Inspiration Bar */}
                            <div className="flex gap-2 mb-3 overflow-x-auto pb-2 scrollbar-hide">
                                {suggestions.map((s, i) => (
                                    <button 
                                        key={i} 
                                        onClick={() => handleSend(s.prompt)}
                                        className="whitespace-nowrap bg-white/80 hover:bg-white backdrop-blur px-4 py-2 rounded-xl text-xs font-bold shadow-sm border border-white/50 transition-transform active:scale-95 text-blue-900"
                                    >
                                        {s.label}
                                    </button>
                                ))}
                            </div>

                            {/* Hybrid Input Bar */}
                            <div className="glass-panel p-2 rounded-2xl flex items-center gap-2 shadow-2xl">
                                <button className="w-10 h-10 rounded-xl bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-100 transition-colors">
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                </button>
                                
                                <input 
                                    type="text" 
                                    value={input}
                                    onChange={(e) => setInput(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                                    placeholder="Describe tu campa√±a o idea..." 
                                    className="flex-1 bg-transparent border-none outline-none text-sm font-medium placeholder-gray-500 text-gray-800"
                                />
                                
                                <button 
                                    onClick={() => handleSend()}
                                    className="w-10 h-10 rounded-xl bg-blue-600 text-white flex items-center justify-center shadow-lg hover:scale-105 transition-transform"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 12h14M12 5l7 7-7 7" /></svg>
                                </button>
                                
                                <button className="w-10 h-10 rounded-xl bg-gray-900 text-white flex items-center justify-center shadow-lg hover:scale-105 transition-transform">
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* ADS MODAL */}
                    {showAd && <AdBreak onFinish={() => generateResponse(messages[messages.length-1].content)} />}

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

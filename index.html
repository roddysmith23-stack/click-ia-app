<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAG.IA - The Future of Marketing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=Chakra+Petch:wght@400;600;700;800&family=Oswald:wght@500&family=Playfair+Display:wght@600&family=Montserrat:wght@700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    
    <style>
        /* --- MAG.IA GLOBAL CORE --- */
        body { margin: 0; overflow-x: hidden; font-family: 'Inter', sans-serif; background: #000; color: white; }
        
        /* FONDO L√çQUIDO GLOBAL */
        .liquid-wrapper {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background-size: 400% 400%;
            transition: background-image 2s ease-in-out;
            animation: gradientBG 15s ease infinite;
        }

        .theme-morning { background-image: linear-gradient(-45deg, #0ea5e9, #22d3ee, #e0f2fe, #0284c7); }
        .theme-sunset { background-image: linear-gradient(-45deg, #f59e0b, #db2777, #7c3aed, #ea580c); }
        .theme-night { background-image: linear-gradient(-45deg, #020617, #1e1b4b, #312e81, #000000); }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- GLASSMORPHISM SYSTEM (HIERARCHY) --- */
        
        /* Nivel 1: Contenedores Principales (Paneles grandes) */
        .glass-base {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
        }

        /* Nivel 2: Tarjetas Flotantes (Cards, Inputs) */
        .glass-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }
        .glass-card:hover { 
            background: rgba(255, 255, 255, 0.12); 
            border-color: rgba(255,255,255,0.4); 
            transform: translateY(-5px); 
        }
        
        /* Nivel 3: Botones e Interactivos */
        .glass-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.2s;
        }
        .glass-btn:hover { background: rgba(255, 255, 255, 0.25); border-color: white; transform: scale(1.02); }

        /* --- LOGO MAG.IA --- */
        .sun-icon { transition: all 1s ease; filter: drop-shadow(0 0 15px rgba(255,255,255,0.6)); animation: sunPulse 4s infinite ease-in-out; }
        @keyframes sunPulse { 0% { transform: scale(1); filter: drop-shadow(0 0 15px currentColor); } 50% { transform: scale(1.1); filter: drop-shadow(0 0 30px currentColor); } 100% { transform: scale(1); filter: drop-shadow(0 0 15px currentColor); } }

        .sun-morning { color: #fcd34d; }
        .sun-sunset { color: #fb923c; }
        .sun-night { color: #60a5fa; }

        .logo-text {
            font-family: 'Chakra Petch', sans-serif;
            font-style: italic;
            letter-spacing: -2px;
            transform: skewX(-10deg); /* Efecto de velocidad/arco */
            text-shadow: 0 0 20px rgba(255,255,255,0.4);
        }

        /* --- INPUTS & FORMS --- */
        .quiz-input { background: transparent; border: none; border-bottom: 2px solid rgba(255,255,255,0.3); width: 100%; padding: 20px; font-size: 1.5rem; color: white; text-align: center; font-family: 'Chakra Petch'; transition: all 0.3s; text-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .quiz-input:focus { outline: none; border-color: #fff; background: rgba(255,255,255,0.1); }
        .glass-input { background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2); color: white; font-family: 'Chakra Petch'; padding: 14px; width: 100%; border-radius: 12px; backdrop-filter: blur(5px); }
        .glass-input:focus { outline: none; border-color: #fff; background: rgba(255, 255, 255, 0.2); }

        /* --- UTILS --- */
        .font-tech { font-family: 'Chakra Petch', sans-serif; }
        .fade-enter { animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Boton Premium */
        .gold-btn {
            background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            color: black; font-weight: 900; text-transform: uppercase; letter-spacing: 0.05em;
            border-radius: 12px; padding: 14px 20px; transition: all 0.2s; cursor: pointer;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.3); border: 1px solid #fcd34d; position: relative; overflow: hidden;
        }
        .gold-btn:hover { transform: translateY(-2px); box-shadow: 0 0 40px rgba(251, 191, 36, 0.6); }

        /* Scrollbars */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.4); }

        /* Editor Specifics */
        .editor-glass-panel { background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(20px); border-right: 1px solid rgba(255,255,255,0.1); }
        .editor-canvas-area { background: rgba(0,0,0,0.2); backdrop-filter: blur(5px); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- TIME ENGINE (Cerebro Din√°mico) ---
        const useTimeTheme = () => {
            const [timeState, setTimeState] = useState('morning');
            useEffect(() => {
                const checkTime = () => {
                    const hour = new Date().getHours();
                    if (hour >= 6 && hour < 17) setTimeState('morning');
                    else if (hour >= 17 && hour < 20) setTimeState('sunset');
                    else setTimeState('night');
                };
                checkTime();
                const interval = setInterval(checkTime, 60000);
                return () => clearInterval(interval);
            }, []);
            return timeState;
        };

        // --- ICONS & ASSETS ---
        const Icons = {
            SunLogo: ({ theme }) => (
                <svg className={`sun-icon sun-${theme} w-24 h-24 mb-1`} viewBox="0 0 24 24" fill="currentColor" stroke="none">
                    <circle cx="12" cy="12" r="5" />
                    <g stroke="currentColor" strokeWidth="2.5" strokeLinecap="round">
                        <line x1="12" y1="1" x2="12" y2="3.5" />
                        <line x1="12" y1="20.5" x2="12" y2="23" />
                        <line x1="4.22" y1="4.22" x2="6" y2="6" />
                        <line x1="18" y1="18" x2="19.78" y2="19.78" />
                        <line x1="1" y1="12" x2="3.5" y2="12" />
                        <line x1="20.5" y1="12" x2="23" y2="12" />
                        <line x1="4.22" y1="19.78" x2="6" y2="18" />
                        <line x1="18" y1="6" x2="19.78" y2="4.22" />
                    </g>
                </svg>
            ),
            // ... (Resto de iconos est√°ndar)
            Google: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"/></svg>,
            Upload: () => <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>,
            Zap: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>,
            Check: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4ade80" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
            ChevronLeft: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="15 18 9 12 15 6"/></svg>,
            Credit: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.15-1.46-3.27-3.4h1.96c.1 1.05 1.18 1.91 2.53 1.91 1.38 0 2.36-.83 2.36-1.9 0-1.07-.69-1.58-2.61-2.17-2.24-.68-3.37-1.62-3.37-3.43 0-1.73 1.37-3.1 3.07-3.44V3.98h2.67v1.96c1.56.35 2.76 1.54 2.91 3.14h-1.98c-.13-1.01-1.02-1.68-2.18-1.68-1.24 0-2.15.79-2.15 1.8 0 .95.63 1.46 2.36 2.01 2.43.77 3.62 1.74 3.62 3.62 0 1.9-1.42 3.09-3.23 3.26z"/></svg>,
            Copy: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>,
            Edit: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>,
            Key: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>,
            Text: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" y1="20" x2="15" y2="20"/><line x1="12" y1="4" x2="12" y2="20"/></svg>,
            Image: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>,
            Trash: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
            Download: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>,
            Clock: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            X: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
            ChevronDown: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="6 9 12 15 18 9"/></svg>,
            Sliders: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/><line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/><line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/><line x1="1" y1="14" x2="7" y2="14"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="17" y1="16" x2="23" y2="16"/></svg>,
            Instagram: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>,
            Tiktok: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"/></svg>,
            Facebook: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>,
            Undo: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>,
            Redo: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 7v6h-6"/><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"/></svg>,
            Star: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
        };

        // --- DATA & TRANSLATIONS ---
        const TRANSLATIONS = {
            ES: {
                enter: "INGRESAR", prices: "VER PRECIOS", faq: "PREGUNTAS", powered: "Potenciado por Google Gemini",
                hero_mk: "EL FUTURO DEL MARKETING", hero_auto: "PARA EMPRESAS.",
                bullets: ['√öltima Tecnolog√≠a', 'Velocidad Luz', 'Neuromarketing', 'Ahorro Total', 'Experto en Ventas'],
                cta_trial: "RECIBE UNA PRUEBA GRATIS", cta_posts: "GENERA 50 POST AL MES",
                setup_title: "IDENTIFICACI√ìN", setup_desc: "Ingresa tus datos para conectar tu cuenta.", setup_btn: "CONECTAR Y ENTRAR",
                lbl_email: "TU CORREO ELECTR√ìNICO", ph_email: "ejemplo@empresa.com",
                lbl_api: "TU GOOGLE GEMINI API KEY", ph_api: "Pega tu clave AIza...",
                upload_title: "Fase 1: Carga de Activos", upload_prod: "PRODUCTO", upload_logo: "LOGOTIPO", next: "SIGUIENTE",
                q1_title: "¬øQUI√âN ES TU CLIENTE?", q1_ph: "Ej: Mujeres j√≥venes, deportistas...",
                q2_title: "DETALLES DEL PRODUCTO", q2_p1: "¬øQu√© vendes? (Ej: Hamburguesa)", q2_p2: "Precio ($)", q2_p3: "Promoci√≥n (Opcional)",
                q3_title: "DATOS DE EMPRESA", q3_p1: "Nombre de tu empresa...", q3_p2: "WhatsApp (593...)",
                q4_title: "TU INSPIRACI√ìN", q4_ph1: "Ej: Apple, Nike...", q4_upload: "O Sube una foto de referencia", q4_change: "Cambiar Imagen",
                q5_title: "PALETA DE COLORES", style_title: "ELIGE EL ESTILO", light_title: "ILUMINACI√ìN",
                google_data: "Google Data Pro", google_desc: "Usar datos reales de b√∫squeda",
                gen_btn: "GENERAR CAMPA√ëA", processing: "PROCESANDO DATOS...", result_title: "RESULTADOS",
                viral_score: "Viral Score", viral_desc: "Alto potencial de alcance org√°nico detectado.",
                schedule: "Cronograma IA", copy_viral: "Copy Viral", star_text: "TEXTO ESTRELLA ‚òÖ",
                trends: "Tendencias Detectadas", publish: "PUBLICAR AHORA", new_btn: "NUEVO", ready: "LISTO",
                credits: "CR√âDITOS", color_n: "NEUTROS", color_nu: "NUDE", color_p: "PRIMARIOS", color_s: "SECUNDARIOS", color_t: "TERTIARIOS", color_q: "CUATERNARIOS",
                loading_steps: ["BUSCANDO EN LA WEB...", "ANALIZANDO TENDENCIAS...", "ESTRUCTURANDO ESTRATEGIA...", "GENERANDO IMAGEN 8K...", "REDACTANDO COPY VIRAL..."],
                credit_text: '"Si para el universo no existen l√≠mites, no deber√≠a haber l√≠mites para la mente humana‚Äù ‚Äî Roddy Smith',
                creator_title: "NUESTRO CREADOR", creator_role: "CEO & FOUNDER", creator_bio: "Roddy Smith, visionario estrat√©gico. Dominio total de la IA para cambiar el marketing global.",
                creator_mission: "Nuestra misi√≥n es romper las barreras de entrada. MAG.IA naci√≥ para cambiar el mundo.",
                download: "DESCARGAR IMAGEN", premium_download: "DESCARGAR 8K ULTRA (Valla) - $0.99",
                copy_clipboard: "COPIAR TEXTO",
                cloud_welcome: "BIENVENIDO A TU NUBE", cloud_desc: "Aqu√≠ guardamos todas tus campa√±as.",
                edit_design: "üõ†Ô∏è ABRIR NANO-STUDIO", editor_title: "NANO-STUDIO 2.0", save_design: "GUARDAR DISE√ëO", close_editor: "CERRAR",
                edit_text_1: "Texto Principal", edit_text_2: "Subt√≠tulo", edit_size: "Tama√±o Logo",
                default_promo: "Por tiempo limitado",
                copy_headline: "¬øListo para el siguiente nivel?", copy_body_1: "No es solo", copy_body_2: "Es una experiencia.", copy_offer: "Oferta exclusiva:", copy_cta: "üì≤ Haz tu pedido aqu√≠:",
                plans: "PLANES", p_names: ["PRINCIPIANTE", "EMPRESA", "AGENCIA"], p_subs: ["MENSUAL", "PAGO √öNICO 1 A√ëO", "PAGO √öNICO"], rec: "RECOMENDADO", buy: "COMPRAR AHORA", sel: "SELECCIONAR", f_1: ["1 Mes de Servicio", "4K High Definition", "50 Post Mensuales"], f_2: ["1 A√ëO de Servicio", "8K High Definition", "100 Post Mensuales", "Soporte VIP"], f_3: ["1 Mes de Servicio", "8K High Definition", "Ilimitado", "Marca Blanca"], faq_title: "PREGUNTAS FRECUENTES", q1: "¬øQU√â ES MARKETING?", a1: "El Marketing no es vender. Es que te elijan.", q2: "¬øPARA QUE SIRVE LA APP?", a2: "MAG.IA clona el cerebro de los mejores publicistas.", q3: "¬øQU√â GANO CON LA APP?", a3: "Ganas tiempo y calidad mundial.", before: "Antes", after: "Despu√©s",
                s_realistic: 'Fotorealismo', s_cinematic: 'Cinem√°tico', s_luxury: 'Lujo Minimal', s_neon: 'Neon Pop', s_3d: '3D Pixar', s_cyber: 'Cyberpunk',
                l_studio: 'Luz de Estudio', l_studio_desc: 'Frontal Suave', l_neon: 'Ne√≥n', l_neon_desc: 'Lateral Color', l_golden: 'Hora Dorada', l_golden_desc: 'Trasera Solar', l_dramatic: 'Cinem√°tico', l_dramatic_desc: 'Contraste Alto',
                txt_top: 'TU MARCA', txt_bot: 'OFERTA LIMITADA'
            }
        };

        const STYLES_DATA = [
            { id: 'realistic', img: 'https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=400' },
            { id: 'cinematic', img: 'https://images.unsplash.com/photo-1536440136628-849c177e76a1?q=80&w=400' }, 
            { id: 'luxury', img: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=400' },
            { id: 'neon', img: 'https://images.unsplash.com/photo-1555212697-194d092e3b8f?q=80&w=400' },
            { id: '3d', img: 'https://images.unsplash.com/photo-1633356122544-f134324a6cee?q=80&w=400' },
            { id: 'cyber', img: 'https://images.unsplash.com/photo-1515630278258-407f66498911?q=80&w=400' }
        ];

        const LIGHTING_DATA = [
            { id: 'studio', img: 'https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=400' },
            { id: 'neon', img: 'https://images.unsplash.com/photo-1563089145-599997674d42?q=80&w=400' },
            { id: 'golden', img: 'https://images.unsplash.com/photo-1477346611705-65d1883cee1e?q=80&w=400' },
            { id: 'dramatic', img: 'https://images.unsplash.com/photo-1492633423870-43d1cd2775eb?q=80&w=400' }
        ];

        const COLOR_GROUPS = {
            "NEUTROS": ["#FFFFFF", "#000000", "#F5F5F5", "#D3D3D3", "#808080", "#333333"],
            "NUDE": ["#E3D1C4", "#D7B8A3", "#C7A188", "#B88E76", "#A87F63", "#8D6E55", "#6F4F1D", "#5D4037", "#3E2723"],
            "PRIMARIOS": ["#FF0000", "#0000FF", "#FFFF00"],
            "SECUNDARIOS": ["#00FF00", "#FFA500", "#800080"],
            "TERCIARIOS": ["#FF4500", "#FFD700", "#ADFF2F", "#00CED1", "#8A2BE2", "#C71585"],
            "CUATERNARIOS": ["#800000", "#808000", "#008080", "#000080"]
        };

        // --- GLOBAL HEADER COMPONENT ---
        const HeaderInternal = ({ credits, setView, t, theme }) => (
            <div className="absolute top-0 left-0 w-full p-4 md:p-6 flex justify-center items-start gap-6 z-50 pointer-events-none">
                <div className="pointer-events-auto absolute left-4 md:left-8 top-6">
                    <button onClick={() => setView('pricing')} className="flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-full border border-white/20 hover:border-white/50 hover:scale-105 transition-all shadow-lg group">
                        <span className="text-yellow-400 group-hover:rotate-12 transition-transform"><Icons.Credit /></span>
                        <span className="text-xs font-bold font-tech text-white">{credits} {t.credits}</span>
                    </button>
                </div>
                <div className="pointer-events-auto flex flex-col items-center cursor-pointer group mt-2 hover:scale-105 transition-transform" onClick={() => setView('landing')}>
                    <Icons.SunLogo theme={theme} />
                    <span className="text-4xl font-black logo-text text-white tracking-widest leading-none mt-2">MAG.IA</span>
                    <div className="flex items-center gap-1 text-[9px] text-white/80 font-bold uppercase tracking-[0.2em] mt-2 bg-black/20 px-3 py-1 rounded-full backdrop-blur-sm border border-white/10">
                        {t.powered}
                    </div>
                </div>
            </div>
        );

        // --- NANO STUDIO 2.0 (GLASS EDITION) ---
        const DesignEditor = ({ image, logo, initialText, onSave, onClose, tLang }) => {
            const canvasRef = useRef(null);
            const fabricCanvasRef = useRef(null);
            const [selectedObj, setSelectedObj] = useState(null);

            useEffect(() => {
                let timer;
                const initCanvas = () => {
                    const canvasElement = canvasRef.current;
                    if (!canvasElement) return;
                    if (fabricCanvasRef.current) { try { fabricCanvasRef.current.dispose(); } catch(e) {} fabricCanvasRef.current = null; }
                    try {
                        const canvas = new fabric.Canvas(canvasElement, { width: 800, height: 800, backgroundColor: 'transparent' }); // Canvas transparente
                        fabricCanvasRef.current = canvas;
                        canvas.on('selection:created', (e) => setSelectedObj(e.selected[0]));
                        canvas.on('selection:updated', (e) => setSelectedObj(e.selected[0]));
                        canvas.on('selection:cleared', () => setSelectedObj(null));

                        if (image) {
                            fabric.Image.fromURL(image, (img) => {
                                if(!img || !fabricCanvasRef.current) return; 
                                const maxWidth = 800;
                                const scale = maxWidth / img.width;
                                canvas.setWidth(img.width * scale);
                                canvas.setHeight(img.height * scale);
                                img.set({ originX: 'left', originY: 'top', scaleX: scale, scaleY: scale, selectable: false, evented: false });
                                canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));
                                
                                const t = new fabric.IText(initialText.top || "YOUR BRAND", { left: 50, top: 50, fontFamily: 'Chakra Petch', fill: "#FFF", fontSize: 40, fontWeight: 'bold', shadow: 'rgba(0,0,0,0.8) 2px 2px 5px' });
                                canvas.add(t);
                            }, { crossOrigin: 'anonymous' });
                        }
                    } catch (err) { console.error(err); }
                };
                timer = setTimeout(initCanvas, 300);
                return () => clearTimeout(timer);
            }, [image]); 

            const download = () => { if(fabricCanvasRef.current) { const dataURL = fabricCanvasRef.current.toDataURL({ format: 'jpeg', quality: 0.9, multiplier: 2 }); const link = document.createElement('a'); link.download = `MAGIA_${Date.now()}.jpg`; link.href = dataURL; link.click(); } };

            // ESTRUCTURA GLASS NANO STUDIO
            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 fade-enter backdrop-blur-sm">
                    <div className="w-[95%] h-[90%] flex border border-white/20 rounded-3xl overflow-hidden shadow-2xl glass-base">
                        <div className="w-80 editor-glass-panel p-6 flex flex-col gap-6 overflow-y-auto">
                             <h3 className="font-tech text-white text-2xl mb-2 drop-shadow-md">{tLang.editor_title}</h3>
                             <div className="grid grid-cols-2 gap-2"><button className="glass-btn py-3 rounded-xl flex flex-col items-center gap-2 text-xs font-bold uppercase"><Icons.Text /> Texto</button><button className="glass-btn py-3 rounded-xl flex flex-col items-center gap-2 text-xs font-bold uppercase"><Icons.Image /> Imagen</button></div>
                             {selectedObj ? <div className="p-4 glass-card rounded-xl"><p className="text-[10px] uppercase font-bold text-gray-300 mb-2">Propiedades</p><input type="color" className="w-full h-8 rounded cursor-pointer mb-2" onChange={e => {selectedObj.set('fill', e.target.value); fabricCanvasRef.current.renderAll()}} /><input type="range" className="w-full accent-white" min="0" max="1" step="0.1" onChange={e => {selectedObj.set('opacity', parseFloat(e.target.value)); fabricCanvasRef.current.renderAll()}} /></div> : <div className="text-center py-10 text-white/50 text-xs italic">Selecciona un elemento</div>}
                             <div className="mt-auto flex flex-col gap-2"><button onClick={download} className="gold-btn w-full text-xs flex justify-center gap-2"><Icons.Download /> EXPORTAR</button><button onClick={onClose} className="glass-btn w-full py-3 rounded-xl text-xs uppercase font-bold hover:bg-white/10">{tLang.close_editor}</button></div>
                        </div>
                        <div className="flex-1 editor-canvas-area flex items-center justify-center relative overflow-hidden p-10"><canvas ref={canvasRef} /></div>
                    </div>
                </div>
            );
        };

        const QuestionScreen = ({ title, children, onNext, onPrev, credits, setView, tLang, theme }) => (
            <div className="min-h-screen flex flex-col items-center justify-center p-6 fade-enter relative z-10">
                <HeaderInternal credits={credits} setView={setView} t={tLang} theme={theme} />
                <div className="w-full max-w-2xl glass-base p-12 rounded-[2rem] text-center relative mt-24">
                    <div className="absolute top-8 left-8 cursor-pointer text-white/60 hover:text-white transition-colors hover:scale-110" onClick={onPrev}><Icons.ChevronLeft /></div>
                    <h2 className="text-3xl font-bold font-tech mb-10 text-white drop-shadow-lg tracking-wide">{title}</h2>
                    {children}
                    <button onClick={onNext} className="gold-btn w-full mt-12 py-4 text-sm tracking-widest shadow-lg">{tLang.next}</button>
                </div>
                <div className="relative margin-top-50 padding-bottom-30 width-100 text-center font-size-11 text-uppercase letter-spacing-0.2em color-white-60 font-tech pointer-events-none text-shadow-0-2px-10px-black-50 max-width-800 margin-auto line-height-1.6 mt-12 text-xs text-white/50 tracking-[0.2em] font-tech uppercase">{tLang.credit_text}</div>
            </div>
        );

        const App = () => {
            const [view, setView] = useState('landing');
            const [credits, setCredits] = useState(3);
            const [user, setUser] = useState(null);
            const [loadingText, setLoadingText] = useState('');
            const [progress, setProgress] = useState(0);
            const timeTheme = useTimeTheme();
            const t = TRANSLATIONS['ES'];
            const [isEditing, setIsEditing] = useState(false);
            const [resultImage, setResultImage] = useState("https://images.unsplash.com/photo-1550547660-d9450f859349?q=80&w=2865");

            // Mock Data States
            const [formData, setFormData] = useState({ target: '', product: { name: '', price: '' }, company: '', whatsapp: '' });

            // Handlers Simples
            const changeView = (v) => setView(v);
            const runEngine = async () => {
                setView('processing');
                const steps = ["CONECTANDO NEURONAS...", "ANALIZANDO MERCADO...", "GENERANDO MAGIA...", "PULIENDO PIXELES..."];
                for(let i=0; i<steps.length; i++) { setLoadingText(steps[i]); setProgress(((i+1)/steps.length)*100); await new Promise(r => setTimeout(r, 800)); }
                setView('result');
            };

            return (
                <div className={`theme-${timeTheme} min-h-screen text-white font-sans selection:bg-pink-500 selection:text-white`}>
                    <div className="liquid-wrapper"></div>
                    
                    {/* LANDING VIEW */}
                    {view === 'landing' && (
                        <div className="min-h-screen flex flex-col items-center justify-center p-6 text-center relative z-10 fade-enter">
                            <div className="flex flex-col items-center justify-center gap-4 mb-12 animate-pulse-fast cursor-pointer select-none mt-20">
                                <Icons.SunLogo theme={timeTheme} />
                                <h1 className="text-7xl md:text-9xl font-black logo-text text-white leading-none">MAG.IA</h1>
                                <div className="inline-flex items-center gap-2 px-6 py-2 glass-card rounded-full text-white text-[10px] font-bold uppercase tracking-[0.25em] border border-white/20">{t.powered}</div>
                            </div>
                            <h2 className="text-4xl md:text-6xl font-bold font-tech mb-8 leading-tight text-white drop-shadow-[0_4px_10px_rgba(0,0,0,0.5)]">{t.hero_mk}</h2>
                            <button onClick={() => changeView('setup')} className="gold-btn px-16 py-6 text-xl rounded-2xl shadow-[0_0_40px_rgba(251,191,36,0.4)] mb-20">{t.cta_trial}</button>
                            <div className="text-xs text-white/50 tracking-[0.2em] font-tech uppercase">{t.credit_text}</div>
                        </div>
                    )}

                    {/* SETUP VIEW (GLASS) */}
                    {view === 'setup' && (
                        <div className="min-h-screen flex items-center justify-center p-6 z-10 relative">
                            <div className="w-full max-w-md glass-base p-10 rounded-[2rem] text-center relative">
                                <button onClick={() => setView('landing')} className="absolute top-6 right-6 text-white/50 hover:text-white"><Icons.X /></button>
                                <h2 className="text-3xl font-bold font-tech mb-4 drop-shadow-md">{t.setup_title}</h2>
                                <p className="text-white/70 text-sm mb-8 leading-relaxed">{t.setup_desc}</p>
                                <div className="space-y-4">
                                    <input className="glass-input" placeholder={t.lbl_email} />
                                    <button onClick={() => changeView('upload')} className="gold-btn w-full flex items-center justify-center gap-2">{t.setup_btn}</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* UPLOAD VIEW (GLASS) */}
                    {view === 'upload' && (
                        <div className="min-h-screen flex flex-col items-center justify-center p-6 fade-enter relative z-10">
                            <HeaderInternal credits={credits} setView={setView} t={t} theme={timeTheme} />
                            <div className="w-full max-w-4xl glass-base p-12 rounded-[2rem] text-center mt-24">
                                <h2 className="text-3xl font-bold font-tech mb-10 uppercase tracking-widest">{t.upload_title}</h2>
                                <div className="grid md:grid-cols-2 gap-8 mb-10">
                                    <div className="h-64 glass-card rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-white/5 border-dashed border-2 border-white/30 hover:border-white">
                                        <div className="w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mb-4"><Icons.Upload /></div>
                                        <span className="text-xs font-bold uppercase text-white/60">{t.upload_prod}</span>
                                    </div>
                                    <div className="h-64 glass-card rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-white/5 border-dashed border-2 border-white/30 hover:border-white">
                                        <div className="w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mb-4"><Icons.Zap /></div>
                                        <span className="text-xs font-bold uppercase text-white/60">{t.upload_logo}</span>
                                    </div>
                                </div>
                                <button onClick={() => changeView('q1')} className="gold-btn w-full py-5 text-xl tracking-widest">{t.next}</button>
                            </div>
                        </div>
                    )}

                    {/* QUESTIONS (GLASS GLOBAL) */}
                    {view === 'q1' && <QuestionScreen title={t.q1_title} onNext={() => changeView('q2')} onPrev={() => changeView('upload')} credits={credits} setView={setView} tLang={t} theme={timeTheme}><input className="quiz-input" placeholder={t.q1_ph} autoFocus /></QuestionScreen>}
                    {view === 'q2' && <QuestionScreen title={t.q2_title} onNext={() => changeView('q3')} onPrev={() => changeView('q1')} credits={credits} setView={setView} tLang={t} theme={timeTheme}><div className="space-y-4"><input className="quiz-input" placeholder={t.q2_p1} /><div className="grid grid-cols-2 gap-4"><input className="quiz-input" placeholder={t.q2_p2} /><input className="quiz-input" placeholder={t.q2_p3} /></div></div></QuestionScreen>}
                    {view === 'q3' && <QuestionScreen title={t.q3_title} onNext={() => runEngine()} onPrev={() => changeView('q2')} credits={credits} setView={setView} tLang={t} theme={timeTheme}><div className="space-y-4"><input className="quiz-input" placeholder={t.q3_p1} /><input className="quiz-input" placeholder={t.q3_p2} /></div></QuestionScreen>}

                    {/* PROCESSING (GLASS) */}
                    {view === 'processing' && (
                        <div className="min-h-screen flex flex-col items-center justify-center p-8 fade-enter relative z-10">
                            <HeaderInternal credits={credits} setView={setView} t={t} theme={timeTheme} />
                            <div className="flex flex-col items-center justify-center gap-6 w-full max-w-2xl z-10 mt-20">
                                <div className="w-40 h-40 rounded-full glass-base flex items-center justify-center animate-pulse shadow-[0_0_50px_rgba(255,255,255,0.2)]"><Icons.SunLogo theme={timeTheme} /></div>
                                <h2 className="text-3xl font-black font-tech text-white tracking-[0.2em] text-center drop-shadow-lg">{loadingText}</h2>
                                <div className="w-full max-w-md h-2 bg-white/10 rounded-full overflow-hidden border border-white/20"><div className="h-full bg-white shadow-[0_0_20px_white]" style={{ width: `${progress}%`, transition: 'width 0.2s ease' }}></div></div>
                            </div>
                        </div>
                    )}

                    {/* RESULTS VIEW (GLOBAL GLASS REINFORCED) */}
                    {view === 'result' && (
                        <div className="min-h-screen flex flex-col items-center justify-center p-6 fade-enter relative z-10">
                            <HeaderInternal credits={credits} setView={setView} t={t} theme={timeTheme} />
                            <h2 className="text-4xl md:text-5xl font-black font-tech text-white mt-32 mb-8 tracking-widest text-center drop-shadow-lg">{t.result_title}</h2>
                            <div className="w-full max-w-7xl grid md:grid-cols-2 gap-10 glass-base p-8 rounded-[2rem]">
                                <div className="space-y-6">
                                    <div className="relative group rounded-2xl overflow-hidden border border-white/20 shadow-2xl mx-auto h-[500px] glass-card">
                                        <img src={resultImage} className="w-full h-full object-cover" />
                                    </div>
                                    <div className="flex gap-2">
                                        <button className="flex-1 glass-btn py-4 rounded-xl text-xs font-bold uppercase flex items-center justify-center gap-2"><Icons.Download /> {t.download}</button>
                                        <button onClick={() => setIsEditing(true)} className="flex-1 glass-btn py-4 rounded-xl text-xs font-bold uppercase flex items-center justify-center gap-2"><Icons.Edit /> {t.edit_design}</button>
                                    </div>
                                    <button className="gold-btn w-full text-xs flex items-center justify-center gap-2 shadow-lg"><Icons.Star /> {t.premium_download}</button>
                                </div>
                                <div className="flex flex-col space-y-6">
                                    <div className="glass-card p-6 rounded-2xl border-l-4 border-white flex flex-col justify-center">
                                        <div className="flex items-center justify-between mb-2">
                                            <div className="flex items-center gap-2"><Icons.Zap /><span className="text-xs font-bold text-white uppercase tracking-widest">{t.viral_score}</span></div>
                                            <div className="text-3xl font-black font-tech text-white">9.8</div>
                                        </div>
                                        <div className="w-full h-2 bg-white/10 rounded-full overflow-hidden"><div className="h-full bg-white w-[98%] shadow-[0_0_10px_white]"></div></div>
                                    </div>
                                    <div className="glass-card p-6 rounded-2xl border-l-4 border-white h-full relative">
                                        <div className="flex justify-between items-center mb-4">
                                            <h3 className="text-xs font-bold text-white uppercase tracking-widest flex items-center gap-2"><Icons.Copy /> {t.copy_viral}</h3>
                                            <button className="text-[10px] glass-btn px-3 py-1 rounded-full">{t.copy_clipboard}</button>
                                        </div>
                                        <p className="text-sm text-gray-200 font-mono leading-relaxed">üöÄ ¬°DESCUBRE EL FUTURO! <br/><br/>No es solo un producto, es una revoluci√≥n. üî•<br/><br/>#Viral #Future #Tech</p>
                                    </div>
                                    <button onClick={() => setView('upload')} className="glass-btn w-full py-4 rounded-xl text-xs font-bold uppercase">{t.new_btn}</button>
                                </div>
                            </div>
                            <div className="mt-12 text-xs text-white/50 tracking-[0.2em] font-tech uppercase">{t.credit_text}</div>
                        </div>
                    )}

                    {isEditing && <DesignEditor image={resultImage} logo={null} initialText={{}} onSave={() => setIsEditing(false)} onClose={() => setIsEditing(false)} tLang={t} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
